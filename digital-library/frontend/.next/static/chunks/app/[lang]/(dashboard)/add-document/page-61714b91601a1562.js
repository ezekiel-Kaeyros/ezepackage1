(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{6431:function(e,t,l){Promise.resolve().then(l.bind(l,2229))},2229:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return C}});var s=l(7437),a=l(2265),r=l(6691),n=l.n(r),i={src:"/_next/static/media/Frame 492.b30e8003.svg",height:48,width:48,blurWidth:0,blurHeight:0},o=e=>{let{step:t}=e;return(0,s.jsx)("div",{className:"w-full h-hull border-r md:pr-10 pr-2",children:(0,s.jsx)("div",{className:"w-full flex flex-col gap-9",children:[{id:1,text:"Settings",description:"Document Settings"},{id:2,text:"Setup",description:"Document Related"},{id:3,text:"Upload",description:"Upload your documents"},{id:4,text:"Publish",description:"Publish your document "}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t>e.id?(0,s.jsx)(n(),{src:i,alt:"",className:"h-10 w-10"}):(0,s.jsx)("div",{className:" ".concat(e.id==t?"bg-[#1D242D]":"bg-[#3D4C5E] "," h-10 border w-10 rounded-full p-1 flex items-center justify-center text-white"),children:e.id}),(0,s.jsxs)("div",{className:"sm:block hidden",children:[(0,s.jsx)("p",{className:"font-semibold",children:e.text}),(0,s.jsx)("p",{className:"text-sm",children:e.description})]})]}))})})},c=l(8994),d=l(3525),m=e=>{let{step:t,changeHandler:l}=e,{step1:r,dispatch:n}=(0,c.b)(),[i,o]=(0,a.useState)(r.categorie),[m,u]=(0,a.useState)(r.type);return console.log(m,"this is my value doc"),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Settings"}),(0,s.jsx)("p",{className:"text-xs",children:"Document"}),(0,s.jsx)("p",{className:"text-sm mt-5",children:"Science Category :"}),(0,s.jsx)("div",{className:"flex gap-5  overflow-auto lg:w-full border sm:w-96 w-[230px]",children:[{name:"health",id:1},{name:"Mines",id:2},{name:"Ict",id:3},{name:"Agro Food Sciences",id:4},{name:"Energie",id:5},{name:"Social Xciences",id:6},{name:"Data Analytics",id:7}].map((e,t)=>(0,s.jsx)("div",{onClick:()=>{i==e.name?o(""):o(e.name)},className:"h-24 w-24 flex items-center justify-center  ".concat(e.name!=i?"border-black border":"border-mainColor border-3"," rounded-xl text-xs text-center cursor-pointer object-cover px-3"),children:e.name},t))}),(0,s.jsx)("p",{className:"text-sm mt-9 mb-5",children:"Document type :"}),(0,s.jsx)("div",{className:"flex gap-5 items-center overflow-auto w-full border",children:[{name:"Research",id:1},{name:"article",id:2},{name:"Thesis",id:3},{name:"Records",id:4},{name:"attachment",id:5},{name:"book",id:6},{name:"Other",id:7}].map((e,t)=>(0,s.jsx)("div",{onClick:()=>{m==e.name?u(""):u(e.name)},className:"h-24 w-24 flex items-center justify-center  ".concat(e.name!=m?"border-black border":"border-mainColor border-3"," rounded-xl text-xs text-center cursor-pointer"),children:e.name},e.name))}),(0,s.jsx)("button",{disabled:""==i||""==m,onClick:()=>{n((0,d.K2)({categorie:i,type:m})),l("add")},className:"bg-mainColor ".concat(""==m||""==i?"opacity-60":"opacity-100"," px-4 py-2 font-bold text-white text-sm flex justify-center items-center rounded-full mt-10"),children:"Continue"})]})},u=l(1865),p=e=>{let{type:t,icon:l,title:a,name:r,id:i,placeholder:o,props:c,value:d,disabled:m,img:u,isValid:p,min:x,max:f,change:h}=e;return(0,s.jsxs)("div",{className:"mt-3",children:[h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700 mb-2",htmlFor:i,children:a||""}),(0,s.jsxs)("div",{className:"relative w-full ",children:[l?(0,s.jsx)("div",{className:"absolute mr-10 text-gray-400 inset-y-0  left-0 flex items-center pl-3 pointer-events-none",children:l}):"",!l&&u?(0,s.jsx)(n(),{className:"absolute h-[80%] top-[10%] left-[3%] mr-10 ",src:u,alt:""}):"",(0,s.jsx)("input",{name:r,type:t,...c,id:i,disabled:m,value:d,className:" ".concat(p?"border-red-600 bg-red-100":"boder-[#E9ECEF] bg-[#E9ECEF] "," placeholder:text-xs md:text-sm text-xs md:pl-8 pl-2 sm:py-4 py-3  focus:outline-none focus:ring-1  focus:ring-emerald-500 text-gray-900 rounded-xl block w-full  p-2.5  appearance-none	"),placeholder:o,min:x||"",max:f||"",onChange:h,autoFocus:!1})]})]}),!h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700 mb-2",htmlFor:i,children:a||""}),(0,s.jsxs)("div",{className:"relative w-full ",children:[l?(0,s.jsx)("div",{className:"absolute mr-10 text-gray-400 inset-y-0  left-0 flex items-center pl-3 pointer-events-none",children:l}):"",!l&&u?(0,s.jsx)(n(),{className:"absolute h-[80%] top-[10%] left-[3%] mr-10 ",src:u,alt:""}):"",(0,s.jsx)("input",{name:r,type:t,...c,id:i,disabled:m,value:d,className:" ".concat(p?"border-red-600 bg-red-100":"boder-[#E9ECEF] bg-[#E9ECEF] "," md:pl-8 pl-2  sm:py-4 py-3 text-base focus:outline-none focus:ring-1 sm:text-sm focus:ring-emerald-500 text-gray-900 rounded-xl block w-full  p-2.5 placeholder:text-sm sm:placeholder:text-lg appearance-none	"),placeholder:o,min:x||"",max:f||""})]})]})]})},x=e=>{let{type:t,icon:l,title:a,name:r,id:i,placeholder:o,props:c,value:d,disabled:m,img:u,isValid:p,min:x,max:f,change:h}=e;return(0,s.jsxs)("div",{className:"mt-3",children:[h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700 mb-2",htmlFor:i,children:a||""}),(0,s.jsxs)("div",{className:"relative w-full ",children:[l?(0,s.jsx)("div",{className:"absolute mr-10 text-gray-400 inset-y-0  left-0 flex items-center pl-3 pointer-events-none",children:l}):"",!l&&u?(0,s.jsx)(n(),{className:"absolute h-[80%] top-[10%] left-[3%] mr-10 ",src:u,alt:""}):"",(0,s.jsx)("input",{name:r,type:t,...c,id:i,disabled:m,value:d,className:" ".concat(p?"border-red-600 bg-red-100":"boder-[#E9ECEF] bg-[#E9ECEF] "," placeholder:text-xs md:text-sm text-xs pl-12 sm:py-4 py-3  focus:outline-none focus:ring-1  focus:ring-emerald-500 text-gray-900 rounded-xl block w-full  p-2.5  appearance-none	"),placeholder:o,min:x||"",max:f||"",onChange:h})]})]}),!h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700 mb-2",htmlFor:i,children:a||""}),(0,s.jsx)("textarea",{name:"",id:i,className:"bg-[#E9ECEF] rounded-xl border w-full md:pl-8 pl-2",...c})]})]})},f=l(5925);let h=["svg","jpg","jpeg","png"];var b=e=>{let{step:t,changeHandler:l}=e,{step2:r,dispatch:i}=(0,c.b)(),[o,m]=(0,a.useState)(r.coverImage),{register:b,handleSubmit:j,watch:g,setValue:y,formState:{isValid:N,errors:v}}=(0,u.cI)({mode:"onChange"}),w=g("title"),C=g("firstName"),k=g("lastName"),E=g("description"),F=g("author"),D=async e=>{var t,l,s;let a=null===(l=e.target)||void 0===l?void 0:null===(t=l.files[0])||void 0===t?void 0:t.name.split(".").pop();h.includes(a.toLocaleLowerCase())||f.ZP.error("bad file"),null==e||null===(s=e.target)||void 0===s||s.files,h.includes(a.toLocaleLowerCase())?(console.log(e.target.files,"target"),m(e.target.files[0]),e.target.value=null):m(void 0)},S=async e=>{};return(0,a.useEffect)(()=>{y("title",r.title),y("firstName",r.firstName),y("lastName",r.lastName),y("description",r.description),y("author",r.author)},[]),(0,s.jsxs)("form",{onSubmit:j(S),className:"w-full",children:[(0,s.jsx)("h1",{children:"Document Setup"}),(0,s.jsx)("p",{className:"text-xs",children:"Document Related"}),(0,s.jsx)("div",{className:"2xl:w-6/12 lg:9/12 sm:w-11/12 w-full",children:(0,s.jsx)(p,{title:"Enter document Title *",placeholder:"Ex: My Title",id:"titlek",name:"title",type:"text",props:b("title",{required:!0})})}),(0,s.jsx)("div",{className:"2xl:w-6/12 lg:9/12 sm:w-11/12 w-full",children:(0,s.jsx)(p,{title:"FirstName",placeholder:"Enter First Name",id:"firstnamek",name:"firstname",type:"text",props:b("firstName",{required:!0})})}),(0,s.jsx)("div",{className:"2xl:w-6/12 lg:9/12 sm:w-11/12 w-full",children:(0,s.jsx)(p,{title:"LastName",placeholder:"Enter Last Name",id:"lastnamek",name:"lastname",type:"text",props:b("lastName",{required:!0})})}),(0,s.jsx)("div",{className:"2xl:w-6/12 lg:9/12 sm:w-11/12 w-full",children:(0,s.jsx)(p,{title:"Author Name",placeholder:"Enter Author's Name",id:"authork",name:"author",type:"text",props:b("author",{required:!0})})}),(0,s.jsx)("div",{className:"2xl:w-6/12 lg:9/12 sm:w-11/12 w-full mt-5",children:(0,s.jsx)(x,{title:"description",id:"descriptionk",props:b("description",{required:!0})})}),(0,s.jsxs)("div",{className:"w-fit mt-5",children:[(0,s.jsx)("input",{type:"file",accept:".svg,.png,.jpg,.jpeg",id:"file1",className:"hidden",onChange:D}),(0,s.jsx)("p",{className:"font-bold my-3",children:"Cover page"}),o&&(0,s.jsx)("div",{className:"h-48 w-36 ",children:(0,s.jsx)(n(),{src:URL.createObjectURL(o),width:30,height:30,alt:"",className:"h-full w-full object-contain"})}),(0,s.jsx)("label",{htmlFor:"file1",className:"cursor-pointer  bg-mainColor  px-3 py-2 font-bold text-white text-sm flex justify-center items-center rounded-full mt-10",children:"Select picture"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-5 items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{l("back")},className:"px-4 py-2 font-bold text-black text-sm flex justify-center items-center rounded-full mt-10",children:"back"}),(0,s.jsx)("button",{type:"submit",disabled:!F||!E||!C||!k||!w||!o,onClick:()=>{l("add"),i((0,d.Zg)({author:F,firstName:C,description:E,coverImage:o,lastName:k,title:w,url:o?URL.createObjectURL(o):""}))},className:"bg-mainColor ".concat(F&&E&&C&&k&&w&&o?"opacity-100":"opacity-60"," px-4 py-2 font-bold text-white text-sm flex justify-center items-center rounded-full mt-10"),children:"Continue"})]})]})},j={src:"/_next/static/media/Frame 512.babfffe7.svg",height:64,width:64,blurWidth:0,blurHeight:0},g=e=>{let{step:t,changeHandler:l}=e,{step3:r,dispatch:i}=(0,c.b)(),[o,m]=(0,a.useState)(r.file),p=["jpg","png","pdf","xlsx","docx","txt"],{register:x,handleSubmit:h,formState:{isValid:b,errors:g}}=(0,u.cI)({mode:"onChange"}),y=async e=>{var t,l;let s=null===(l=e.target)||void 0===l?void 0:null===(t=l.files[0])||void 0===t?void 0:t.name.split(".").pop();p.includes(s.toLocaleLowerCase())||f.ZP.error("bad file"),p.includes(s.toLocaleLowerCase())?(console.log(e.target.files[0],"target file"),m(e.target.files[0]),e.target.value=null):m(void 0)},N=async e=>{};return(0,s.jsxs)("form",{onSubmit:h(N),className:"w-full",children:[(0,s.jsx)("h1",{children:"Upload "}),(0,s.jsx)("p",{className:"text-xs",children:"Upload your documents"}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{type:"file",accept:".csv,.pdf,.xlsx,.docx,.txt",id:"file1",className:"hidden",onChange:y}),(0,s.jsx)("label",{htmlFor:"file1",className:"cursor-pointer   px-3 py-2 font-bold text-white text-sm flex justify-center items-center  mt-10",children:(0,s.jsxs)("div",{className:"w-full text-[#3E585D] justify-center border-dashed h-96 rounded-xl border border-collapse border-mainColor flex flex-col items-center",children:[(0,s.jsx)(n(),{src:j,alt:""}),(0,s.jsx)("p",{className:"font-bold ",children:"Upload your document"}),(0,s.jsx)("p",{children:"Upload a pdf, docx, xlsx, csv, txt file "})]})}),o&&(0,s.jsxs)("div",{className:"h-24 w-full border flex items-center justify-between px-5 mt-5",children:[(0,s.jsx)("span",{className:"w-6/12",children:null==o?void 0:o.name}),(0,s.jsx)("span",{onClick:()=>m(void 0),className:"cursor-pointer font-bold text-xl",children:"x"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-5 items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{l("back")},className:"px-4 py-2 font-bold text-black text-sm flex justify-center items-center rounded-full mt-10",children:"back"}),(0,s.jsx)("button",{type:"submit",disabled:!o,onClick:()=>{l("add"),i((0,d.eX)({file:o,urlFile:o?URL.createObjectURL(o):""}))},className:"bg-mainColor ".concat(o?"opacity-100":"opacity-60"," px-4 py-2 font-bold text-white text-sm flex justify-center items-center rounded-full mt-10"),children:"Continue"})]})]})},y=l(2173),N=l(4033),v=e=>{let{step:t,changeHandler:l}=e,{step1:r,step2:n,step3:i,step4:o,dispatch:d}=(0,c.b)(),[m,u]=(0,a.useState)(!1),[p,x]=(0,a.useState)(""),{type:h}=r,{file:b}=i,{firstName:j,lastName:g,title:v}=n,w=new FormData;w.append("firstName",j),w.append("lastName",g),w.append("itemTitle",v),w.append("itemType",h),b&&w.append("file",b),console.log(h,"this is my type"),console.log(n,"step2");let{push:C}=(0,N.useRouter)(),[k,E]=(0,a.useState)(o),F="".concat("http://localhost:3000","/api/files/upload"),D=async()=>{u(!0);try{let e=await y.Z.post(F,w,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat("http://localhost:3000")}});if(u(!1),200!==e.status)throw Error("HTTP error! status: ".concat(e.status));e.data,f.ZP.success("File uploaded successfully!")}catch(e){u(!1),console.error("Error uploading file:",e),x(e.message||"An error occurred during file upload"),f.ZP.error("Please Upload another File, this File already exist")}};return console.log(!!p,"errorMessage"),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.x7,{}),(0,s.jsx)("h1",{children:"Settings"}),(0,s.jsx)("p",{className:"text-xs",children:"Document"}),(0,s.jsx)("p",{className:"text-sm mt-5",children:"Science Category :"}),(0,s.jsx)("div",{className:"flex gap-5 items-center overflow-auto w-full border",children:[{name:"private",id:1},{name:"public",id:2}].map(e=>(0,s.jsx)("div",{onClick:()=>{k==e.name?E(""):E(e.name)},className:"h-24 w-24 flex items-center justify-center  ".concat(e.name!=k?"border-black border":"border-mainColor border-3"," rounded-xl text-xs text-center cursor-pointer"),children:e.name},e.name))}),(0,s.jsxs)("div",{className:"flex justify-end gap-5 items-center",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{l("back")},className:"px-4 py-2 font-bold text-black text-sm flex justify-center items-center rounded-full mt-10",children:"back"}),(0,s.jsx)("button",{disabled:""==k,onClick:()=>{D()},className:"bg-mainColor ".concat(""==k?"opacity-60":"opacity-100"," px-4 py-2 font-bold text-white text-sm flex justify-center items-center rounded-full mt-10"),children:m?"loading...":"Done"})]})]})},w=e=>{let{step:t,changeHandler:l}=e;return(0,s.jsxs)("div",{className:"w-full sm:pl-10 pl-3 lg:pb-36 md:pb-24 pb-10",children:[1==t&&(0,s.jsx)(m,{step:t,changeHandler:l}),2==t&&(0,s.jsx)(b,{step:t,changeHandler:l}),3==t&&(0,s.jsx)(g,{step:t,changeHandler:l}),4==t&&(0,s.jsx)(v,{step:t,changeHandler:l})]})},C=()=>{let[e,t]=(0,a.useState)(1),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{l.current&&l.current.scrollIntoView()},[e]),(0,s.jsxs)("div",{className:"w-full px-5 py-5",children:[(0,s.jsx)("div",{ref:l}),(0,s.jsx)("h1",{children:"Upload Document"}),(0,s.jsx)("p",{children:"Upload Articles, Resarch Works, Documentation, Thesis ..."}),(0,s.jsxs)("div",{className:"w-full mt-10 flex h-full",children:[(0,s.jsx)("div",{className:"w-fit h-full ",children:(0,s.jsx)(o,{step:e})}),(0,s.jsx)("div",{className:"flex-grow border-l",children:(0,s.jsx)(w,{step:e,changeHandler:e=>{"add"==e?t(e=>e+1):t(e=>e-1)}})})]})]})}},8994:function(e,t,l){"use strict";l.d(t,{b:function(){return a}});var s=l(3046);let a=()=>{let e=(0,s.v9)(e=>e.AddDocument.step1),t=(0,s.v9)(e=>e.AddDocument.step2),l=(0,s.v9)(e=>e.AddDocument.step3),a=(0,s.v9)(e=>e.AddDocument.step4),r=(0,s.v9)(e=>e.AddDocument.id),n=(0,s.v9)(e=>e.AddDocument.arrayDocs);return{step1:e,dispatch:(0,s.I0)(),step2:t,step3:l,step4:a,arrayDoc:n,idDoc:r}}},3525:function(e,t,l){"use strict";l.d(t,{K2:function(){return a},Zg:function(){return r},dU:function(){return o},eX:function(){return n}});let s=(0,l(9730).oM)({name:"auth",initialState:{step1:{categorie:"",type:"",toLowerCase:function(){throw Error("Function not implemented.")}},step2:{title:"",firstName:"",description:"",author:"",coverImage:void 0,url:"",lastName:""},step3:{file:void 0,urlFile:""},step4:"",arrayDocs:[],id:""},reducers:{step1Handler:(e,t)=>{e.step1=t.payload},step2Handler:(e,t)=>{console.log(t.payload,"this is my type"),e.step2=t.payload},step3Handler:(e,t)=>{e.step3=t.payload,console.log(t.payload,"payload..............")},step4Handler:(e,t)=>{e.arrayDocs=[...e.arrayDocs,{...e.step1,...e.step2,confidentiality:t.payload,...e.step3,id:(e.arrayDocs.length+1).toString(),num:0,save:!1}],e.step1={categorie:"",type:"",toLowerCase:function(){throw Error("Function not implemented.")}},e.step2={title:"",firstName:"",description:"",author:"",coverImage:void 0,lastName:"",url:""},e.step3={file:void 0,urlFile:""},e.step4=""},idHandler:(e,t)=>{e.id=t.payload}}}),{step1Handler:a,step2Handler:r,step3Handler:n,step4Handler:i,idHandler:o}=s.actions;t.ZP=s.reducer}},function(e){e.O(0,[209,691,173,535,971,938,744],function(){return e(e.s=6431)}),_N_E=e.O()}]);