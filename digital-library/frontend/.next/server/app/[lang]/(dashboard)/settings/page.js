(()=>{var e={};e.id=761,e.ids=[761],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>h,tree:()=>u});var s=r(482),a=r(9108),i=r(2563),o=r.n(i),n=r(8300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let u=["",{children:["[lang]",{children:["(dashboard)",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8990)),"/home/top/Documents/eze/digital-library/frontend/src/app/[lang]/(dashboard)/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7565)),"/home/top/Documents/eze/digital-library/frontend/src/app/[lang]/(dashboard)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,5356)),"/home/top/Documents/eze/digital-library/frontend/src/app/[lang]/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,7874)),"/home/top/Documents/eze/digital-library/frontend/src/app/[lang]/not-found.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/home/top/Documents/eze/digital-library/frontend/src/app/[lang]/(dashboard)/settings/page.tsx"],c="/[lang]/(dashboard)/settings/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[lang]/(dashboard)/settings/page",pathname:"/[lang]/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1718:(e,t,r)=>{Promise.resolve().then(r.bind(r,7522))},7522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{UploadFile:()=>T});var s,a,i=r(2295),o=r(3608);let n=require("crypto");var l=r.n(n),u=r(7147),d=r.n(u),c=r(1017),p=r.n(c);class h{constructor(e="https://api.zotero.org",t="ljJwZLSkS26ymt6DFd5D2Blc",r=14487670,s=5577831,a="/zoteroFiles/UnderstandMenNow.pdf",i="",o=null,n=null,l=null,u=p().basename(a),d="",c=new Date().toISOString()){this.baseUrl=e,this.groupId=s,this.userId=r,this.apiKey=t,this.filePath=a,this.coverPageUrl=i,this.itemTitle=o,this.itemType=n,this.authorName=l,this.filename=u,this.note=d,this.accessDate=c}async getFileDetails(){let e=p().basename(this.filePath),t=p().join(process.cwd(),this.filePath);console.log("this is my fileContent",this.filePath);let r=d().readFileSync(t);console.log("this is my fileContent02");let s=d().statSync(t),a=s.size,i=Math.floor(s.mtimeMs),o=l().createHash("md5");return o.update(r),{filename:e,filesize:a,mtime:i,md5Hash:o.digest("hex")}}async getAllUserGroups(){let e=`${this.baseUrl}/users/${this.userId}/groups/`,t={Authorization:`Bearer ${this.apiKey}`};return o.Z.get(e,{headers:t})}async getItemById(e){if(null===e)return{error:"`item_id` cannot be null",status:400};let t=`${this.baseUrl}/groups/${this.groupId}/items/${e}`,r={Authorization:`Bearer ${this.apiKey}`};return o.Z.get(t,{headers:r})}async postParentItem(){let e=`${this.baseUrl}/groups/${this.groupId}/items/`,t=JSON.stringify([{itemType:"book",title:this.itemTitle,creators:[{creatorType:"author",firstName:this.authorName,lastName:this.authorName}],tags:[],collections:[],relations:{},date:"2024",url:"http://example.com/sample-document",accessDate:"2024-06-20"}]),r={Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"};try{return await o.Z.post(e,t,{headers:r})}catch(e){return{error:"Failed To Create File Environment",status:e.response?.status||null}}}async postChildItem(){if(!this.itemType||!this.itemTitle)return{error:"`item_type` and `item_title` cannot be null",status:400};let e=await this.postParentItem();if("error"in e)return e;let t=this.convertDateFormat(this.accessDate),r=`${this.baseUrl}/groups/${this.groupId}/items/`,s=JSON.stringify([{itemType:"attachment",parentItem:e.data.successful[0].data.key,linkMode:"imported_file",title:this.itemTitle,accessDate:t,url:this.coverPageUrl,note:this.note,tags:[],relations:{},contentType:"application/pdf",charset:"",filename:this.filename,md5:null,mtime:null}]),a={Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"};try{return await o.Z.post(r,s,{headers:a})}catch(e){return{error:"Unable To Create File Environment",status:e.response?.status||null}}}convertDateFormat(e){let t=new Date(e),r=t.getUTCFullYear(),s=String(t.getUTCMonth()+1).padStart(2,"0"),a=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),o=String(t.getUTCMinutes()).padStart(2,"0"),n=String(t.getUTCSeconds()).padStart(2,"0");return`${r}-${s}-${a}T${i}:${o}:${n}Z`}async getUploadAuthorization(){let e=await this.postChildItem();if("error"in e)return e;let t=`${this.baseUrl}/groups/${this.groupId}/items/${e.data.successful[0].key}/file`,{filename:r,filesize:s,mtime:a,md5Hash:i}=await this.getFileDetails(),n=`md5=${i}&filename=${r}&filesize=${s}&mtime=${a}`,l={"If-None-Match":"*",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/x-www-form-urlencoded"};try{let r=await o.Z.post(t,n,{headers:l});return r.data.child_item_id=e.data.successful[0].key,{response:r,result:r.data}}catch(e){return{error:"Cannot Get Upload Authorization",status:e.response?.status||null}}}async uploadFile(){let e=await this.getUploadAuthorization();if("error"in e)return e;let{response:t,result:r}=e;if(200!==t.status)return{error:"Upload Authorization Rejected",status:t.status};let s=d().readFileSync(this.filePath),a=Buffer.concat([Buffer.from(r.prefix),s,Buffer.from(r.suffix)]);try{let e=await o.Z.post(r.url,a,{headers:{"Content-Type":r.contentType}});if(201!==e.status)return{error:"Failed To Upload File To s3",status:e.status};return{response:"Successful Upload To Zotero s3",extra_data:{item_id:r.child_item_id,upload_key:r.uploadKey},status:e.status}}catch(e){return{error:"Failed To Upload File To s3",status:e.response?.status||null}}}async registerUpload(){let e=await this.uploadFile();if("error"in e)return e;let t=`${this.baseUrl}/groups/${this.groupId}/items/${e.extra_data.item_id}/file`,r=`upload=${e.extra_data.upload_key}`,s={"If-None-Match":"*",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/x-www-form-urlencoded"};try{let e=await o.Z.post(t,r,{headers:s});if(204!==e.status)return{error:"File Uploaded To Zotero s3 but Zotero Failed To Register File",status:e.status};return e}catch(e){return{error:"File Uploaded To Zotero s3 but Zotero Failed To Register File",status:e.response?.status||null}}}}var m=r(6815);let g=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,y=m.W;r(3729);var f=r(1223),x=r.n(f),b=r(486);let v=(s="w-full  text-white font-medium py-4 flex justify-center px-4 focus:outline-none focus:shadow-outline",a={variants:{variant:{default:"bg-primaryColor  text-white hover:opacity-90",primary:"bg-primaryColor  text-white hover:opacity-90 rounded-lg",secondary:"bg-[#EEF3FB] hover:opacity-90 text-[#2C353A]",danger:"bg-red-500 w-full text-white hover:bg-red-600",outline:"bg-white w-full text-primaryColor01 border border-primaryColor01 hover:opacity-70 rounded-lg",disabled:"bg-primaryColor  opacity-50 w-full text-white",active:"bg-primaryColor  opacity-50 w-full text-white"}},defaultVariants:{variant:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return y(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:i}=a,o=Object.keys(r).map(t=>{let s=null==e?void 0:e[t],a=null==i?void 0:i[t];if(null===s)return null;let o=g(s)||g(a);return r[t][o]}),n=e&&Object.entries(e).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return y(s,o,null==a?void 0:null===(t=a.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...n}[t]):({...i,...n})[t]===r})?[...e,r,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),w=({variant:e,className:t,href:r,icon:s,children:a,...o})=>r?i.jsx(i.Fragment,{}):i.jsx(i.Fragment,{children:i.jsx("button",{...o,className:function(...e){return(0,b.m)((0,m.W)(e))}(v({variant:e,className:t})),children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"mr-2",children:s?i.jsx(x(),{src:s,alt:"Icon"}):""}),a]})})}),T=()=>{let e=new h("https://api.zotero.org","ljJwZLSkS26ymt6DFd5D2Blc",14487670,5577831,"/zoteroFiles/UnderstandMenNow.pdf","","4hrs Deep Everyday","attachment","The New Author","this is my fileName","legend of the seeker"),t=async()=>{try{let t=await e.registerUpload();console.log("File uploaded successfully:",t)}catch(e){console.error("Error uploading file:",e)}};return i.jsx("div",{className:"w-full",children:i.jsx(w,{className:"w-fit rounded-md",onClick:t,children:"Upload File"})})}},8990:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5036);r(2);var a=r(6360),i=r(6843);let o=(0,i.createProxy)(String.raw`/home/top/Documents/eze/digital-library/frontend/src/app/common/components/settings/fileUpload.tsx`),{__esModule:n,$$typeof:l}=o;o.default;let u=(0,i.createProxy)(String.raw`/home/top/Documents/eze/digital-library/frontend/src/app/common/components/settings/fileUpload.tsx#UploadFile`),d=async({params:{lang:e}})=>{let{settings:t}=await (0,a.R)(e);return s.jsx("div",{className:"w-full",children:s.jsx(u,{})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,356,89,608,301],()=>r(2891));module.exports=s})();